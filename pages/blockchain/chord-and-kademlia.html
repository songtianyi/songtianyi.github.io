<!DOCTYPE html>
<html>
<head>
<title>chord-and-kademlia.md</title>
<meta http-equiv="Content-type" content="text/html;charset=UTF-8">

<style>
/* https://github.com/microsoft/vscode/blob/master/extensions/markdown-language-features/media/markdown.css */
/*---------------------------------------------------------------------------------------------
 *  Copyright (c) Microsoft Corporation. All rights reserved.
 *  Licensed under the MIT License. See License.txt in the project root for license information.
 *--------------------------------------------------------------------------------------------*/

body {
	font-family: var(--vscode-markdown-font-family, -apple-system, BlinkMacSystemFont, "Segoe WPC", "Segoe UI", "Ubuntu", "Droid Sans", sans-serif);
	font-size: var(--vscode-markdown-font-size, 14px);
	padding: 0 26px;
	line-height: var(--vscode-markdown-line-height, 22px);
	word-wrap: break-word;
}

#code-csp-warning {
	position: fixed;
	top: 0;
	right: 0;
	color: white;
	margin: 16px;
	text-align: center;
	font-size: 12px;
	font-family: sans-serif;
	background-color:#444444;
	cursor: pointer;
	padding: 6px;
	box-shadow: 1px 1px 1px rgba(0,0,0,.25);
}

#code-csp-warning:hover {
	text-decoration: none;
	background-color:#007acc;
	box-shadow: 2px 2px 2px rgba(0,0,0,.25);
}

body.scrollBeyondLastLine {
	margin-bottom: calc(100vh - 22px);
}

body.showEditorSelection .code-line {
	position: relative;
}

body.showEditorSelection .code-active-line:before,
body.showEditorSelection .code-line:hover:before {
	content: "";
	display: block;
	position: absolute;
	top: 0;
	left: -12px;
	height: 100%;
}

body.showEditorSelection li.code-active-line:before,
body.showEditorSelection li.code-line:hover:before {
	left: -30px;
}

.vscode-light.showEditorSelection .code-active-line:before {
	border-left: 3px solid rgba(0, 0, 0, 0.15);
}

.vscode-light.showEditorSelection .code-line:hover:before {
	border-left: 3px solid rgba(0, 0, 0, 0.40);
}

.vscode-light.showEditorSelection .code-line .code-line:hover:before {
	border-left: none;
}

.vscode-dark.showEditorSelection .code-active-line:before {
	border-left: 3px solid rgba(255, 255, 255, 0.4);
}

.vscode-dark.showEditorSelection .code-line:hover:before {
	border-left: 3px solid rgba(255, 255, 255, 0.60);
}

.vscode-dark.showEditorSelection .code-line .code-line:hover:before {
	border-left: none;
}

.vscode-high-contrast.showEditorSelection .code-active-line:before {
	border-left: 3px solid rgba(255, 160, 0, 0.7);
}

.vscode-high-contrast.showEditorSelection .code-line:hover:before {
	border-left: 3px solid rgba(255, 160, 0, 1);
}

.vscode-high-contrast.showEditorSelection .code-line .code-line:hover:before {
	border-left: none;
}

img {
	max-width: 100%;
	max-height: 100%;
}

a {
	text-decoration: none;
}

a:hover {
	text-decoration: underline;
}

a:focus,
input:focus,
select:focus,
textarea:focus {
	outline: 1px solid -webkit-focus-ring-color;
	outline-offset: -1px;
}

hr {
	border: 0;
	height: 2px;
	border-bottom: 2px solid;
}

h1 {
	padding-bottom: 0.3em;
	line-height: 1.2;
	border-bottom-width: 1px;
	border-bottom-style: solid;
}

h1, h2, h3 {
	font-weight: normal;
}

table {
	border-collapse: collapse;
}

table > thead > tr > th {
	text-align: left;
	border-bottom: 1px solid;
}

table > thead > tr > th,
table > thead > tr > td,
table > tbody > tr > th,
table > tbody > tr > td {
	padding: 5px 10px;
}

table > tbody > tr + tr > td {
	border-top: 1px solid;
}

blockquote {
	margin: 0 7px 0 5px;
	padding: 0 16px 0 10px;
	border-left-width: 5px;
	border-left-style: solid;
}

code {
	font-family: Menlo, Monaco, Consolas, "Droid Sans Mono", "Courier New", monospace, "Droid Sans Fallback";
	font-size: 1em;
	line-height: 1.357em;
}

body.wordWrap pre {
	white-space: pre-wrap;
}

pre:not(.hljs),
pre.hljs code > div {
	padding: 16px;
	border-radius: 3px;
	overflow: auto;
}

pre code {
	color: var(--vscode-editor-foreground);
	tab-size: 4;
}

/** Theming */

.vscode-light pre {
	background-color: rgba(220, 220, 220, 0.4);
}

.vscode-dark pre {
	background-color: rgba(10, 10, 10, 0.4);
}

.vscode-high-contrast pre {
	background-color: rgb(0, 0, 0);
}

.vscode-high-contrast h1 {
	border-color: rgb(0, 0, 0);
}

.vscode-light table > thead > tr > th {
	border-color: rgba(0, 0, 0, 0.69);
}

.vscode-dark table > thead > tr > th {
	border-color: rgba(255, 255, 255, 0.69);
}

.vscode-light h1,
.vscode-light hr,
.vscode-light table > tbody > tr + tr > td {
	border-color: rgba(0, 0, 0, 0.18);
}

.vscode-dark h1,
.vscode-dark hr,
.vscode-dark table > tbody > tr + tr > td {
	border-color: rgba(255, 255, 255, 0.18);
}

</style>

<style>
/* Tomorrow Theme */
/* http://jmblog.github.com/color-themes-for-google-code-highlightjs */
/* Original theme - https://github.com/chriskempson/tomorrow-theme */

/* Tomorrow Comment */
.hljs-comment,
.hljs-quote {
	color: #8e908c;
}

/* Tomorrow Red */
.hljs-variable,
.hljs-template-variable,
.hljs-tag,
.hljs-name,
.hljs-selector-id,
.hljs-selector-class,
.hljs-regexp,
.hljs-deletion {
	color: #c82829;
}

/* Tomorrow Orange */
.hljs-number,
.hljs-built_in,
.hljs-builtin-name,
.hljs-literal,
.hljs-type,
.hljs-params,
.hljs-meta,
.hljs-link {
	color: #f5871f;
}

/* Tomorrow Yellow */
.hljs-attribute {
	color: #eab700;
}

/* Tomorrow Green */
.hljs-string,
.hljs-symbol,
.hljs-bullet,
.hljs-addition {
	color: #718c00;
}

/* Tomorrow Blue */
.hljs-title,
.hljs-section {
	color: #4271ae;
}

/* Tomorrow Purple */
.hljs-keyword,
.hljs-selector-tag {
	color: #8959a8;
}

.hljs {
	display: block;
	overflow-x: auto;
	color: #4d4d4c;
	padding: 0.5em;
}

.hljs-emphasis {
	font-style: italic;
}

.hljs-strong {
	font-weight: bold;
}
</style>

<style>
/*
 * Markdown PDF CSS
 */

 body {
	font-family: -apple-system, BlinkMacSystemFont, "Segoe WPC", "Segoe UI", "Ubuntu", "Droid Sans", sans-serif, "Meiryo";
	padding: 0 12px;
}

pre {
	background-color: #f8f8f8;
	border: 1px solid #cccccc;
	border-radius: 3px;
	overflow-x: auto;
	white-space: pre-wrap;
	overflow-wrap: break-word;
}

pre:not(.hljs) {
	padding: 23px;
	line-height: 19px;
}

blockquote {
	background: rgba(127, 127, 127, 0.1);
	border-color: rgba(0, 122, 204, 0.5);
}

.emoji {
	height: 1.4em;
}

code {
	font-size: 14px;
	line-height: 19px;
}

/* for inline code */
:not(pre):not(.hljs) > code {
	color: #C9AE75; /* Change the old color so it seems less like an error */
	font-size: inherit;
}

/* Page Break : use <div class="page"/> to insert page break
-------------------------------------------------------- */
.page {
	page-break-after: always;
}

</style>

<script src="https://unpkg.com/mermaid/dist/mermaid.min.js"></script>
</head>
<body>
  <script>
    mermaid.initialize({
      startOnLoad: true,
      theme: document.body.classList.contains('vscode-dark') || document.body.classList.contains('vscode-high-contrast')
          ? 'dark'
          : 'default'
    });
  </script>
<h1 id="chord-%E5%92%8C-kademlia-%E7%AE%97%E6%B3%95">Chord å’Œ Kademlia ç®—æ³•</h1>
<p>ä½œè€…: songtianyi create@2022-06-29</p>
<h2 id="%E8%83%8C%E6%99%AF">èƒŒæ™¯</h2>
<p>åœ¨æ•´ä¸ªå»ä¸­å¿ƒåŒ–ç”Ÿæ€é‡Œé‡Œï¼ŒP2P(Peer-to-Peer) éƒ½æ˜¯éå¸¸é‡è¦ä¸”å¿…è¦çš„æŠ€æœ¯ï¼Œå®ƒçš„ç‰¹ç‚¹æ˜¯ï¼Œæ¯ä¸ªèŠ‚ç‚¹æ˜¯ç­‰ä»·çš„ï¼Œæ—¢å¯ä»¥ä½œä¸º client, åˆå¯ä»¥ä½œä¸º server. åœ¨ C/S çš„æ¶æ„ä¸­ï¼Œclient è¦è¿æ¥ server éœ€è¦çŸ¥é“ server çš„åœ°å€ï¼ŒP2P ç½‘ç»œä¸­çš„èŠ‚ç‚¹ä¹‹é—´ä¹Ÿä¸ä¾‹å¤–ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨æ¯ä¸ªèŠ‚ç‚¹ä¸­ä¿å­˜æ‰€æœ‰å…¶å®ƒèŠ‚ç‚¹çš„åœ°å€ä¿¡æ¯ï¼Œå¹¶è®¿é—®ã€‚ä½†é—®é¢˜æ˜¯ï¼Œå¦‚æœç½‘ç»œä¸­çš„èŠ‚ç‚¹æ•°é‡éå¸¸åºå¤§ï¼Œè¾¾åˆ°ç™¾ä¸‡çº§åˆ«ï¼Œè¿™æ ·çš„æ–¹å¼å¯¹äºå†…å­˜å’Œå­˜å‚¨çš„æ¶ˆè€—å°±éå¸¸å¤§äº†ã€‚æœ¬æ–‡è¦è®²çš„å†…å®¹ï¼ŒChord å’Œ Kdemia ç®—æ³•ï¼Œå°±æ˜¯æ¥è§£å†³è¿™ä¸ªé—®é¢˜çš„ï¼Œå³ï¼Œè§£å†³èŠ‚ç‚¹é—´å¦‚ä½•é«˜æ•ˆåœ°æ‰¾åˆ°å½¼æ­¤çš„é—®é¢˜ã€‚</p>
<h2 id="%E6%8A%BD%E8%B1%A1%E5%8C%96">æŠ½è±¡åŒ–</h2>
<p>æˆ‘åœ¨ <a href="../programming/software-engineering/M-core-concepts-in-programming.html">ã€Šç¼–ç¨‹æ ¸å¿ƒæ¦‚å¿µã€‹</a> ä¸­çš„æ•°æ®ç»“æ„å’Œç®—æ³•å°èŠ‚ä¸­æœ‰å¼ºè°ƒè¿‡ï¼Œæ•°æ®ç»“æ„ä½œä¸ºè§£å†³é—®é¢˜çš„ç¬¬ä¸€å…³ï¼Œå…¶å®æ¯”ç®—æ³•è¦æ›´é‡è¦ã€‚å¯¹äºè¿™ä¸ªé—®é¢˜ï¼Œä¹Ÿä¸ä¾‹å¤–ã€‚æˆ‘ä»¬é¦–å…ˆè¦åšçš„äº‹æƒ…æ˜¯ï¼Œå°†ç¦»æ•£çš„èŠ‚ç‚¹å˜çš„æœ‰è§„å¾‹ä¸€äº›ï¼Œä¸”ä¸æ”¹å˜å®ƒçš„ç‰¹è´¨ã€‚
å¦‚ä¸‹å›¾ï¼Œè¿™äº›èŠ‚ç‚¹çš„ç»„ç»‡æ–¹å¼ä¸ä¾¿äºæˆ‘ä»¬æ€è€ƒã€‚</p>
<img src="https://songtianyi-blog.oss-cn-shenzhen.aliyuncs.com/A-simplified-IPFS-network-and-its-components-A-user-adds-data-to-the-network-and-its.png" width="30%">
<p>æˆ‘ä»¬å¯ä»¥å°è¯•æŠŠå®ƒæŠ½è±¡æˆä¸€ä¸ªç¯çŠ¶çš„ç»“æ„, å¦‚ä¸‹:</p>
<img src="https://songtianyi-blog.oss-cn-shenzhen.aliyuncs.com/peer-ring.png" width="30%">
<p>è¿™ä¸ªç¯çŠ¶ç»“æ„å’Œè¿™äº›èŠ‚ç‚¹çš„å®é™…ç½‘ç»œæ‹“æ‰‘å¹¶ä¸æ˜¯å¯¹åº”çš„ï¼Œå®ƒä»¬ä¹‹é—´çš„çœŸå®ç‰©ç†è·ç¦»ä¹Ÿå¹¶éåƒå›¾ä¸­æ‰€ç¤ºé‚£æ ·ç­‰åˆ†çš„ã€‚
å¦‚æœæ¯ä¸ªèŠ‚ç‚¹ä¿å­˜å…¶ç›¸é‚»èŠ‚ç‚¹ï¼ˆå¦‚ä¸‹å›¾æ‰€ç¤ºï¼‰ï¼Œæˆ‘ä»¬èƒ½å¾ˆå¿«æ‰¾åˆ°é™„è¿‘çš„èŠ‚ç‚¹ï¼Œä½†å½“èŠ‚ç‚¹æ•°æ¯”è¾ƒåºå¤§çš„æ—¶å€™ï¼Œå¹¶ä¸é«˜æ•ˆï¼Œå¤æ‚åº¦ä¸º <em><strong>O(N)</strong></em></p>
<img src="https://songtianyi-blog.oss-cn-shenzhen.aliyuncs.com/peer-ring-basic-query.jpg" width="30%">
<p>é‚£å¦‚æœè·³ç€æŸ¥å‘¢ï¼ŸèŠ‚ç‚¹ 0 ä¿å­˜äº†èŠ‚ç‚¹ 8 çš„ä¿¡æ¯ï¼Œè¿™æ ·èŠ‚ç‚¹ 8 å‘¨å›´çš„èŠ‚ç‚¹ä¹Ÿèƒ½è¾ƒå¿«è¢«æ‰¾åˆ°ã€‚</p>
<img src="https://songtianyi-blog.oss-cn-shenzhen.aliyuncs.com/basic-query-with-jump.jpg" width="30%">
<h2 id="chord">Chord</h2>
<p>åœ¨ <a href="../programming/data-structure-and-algorithms/M-time-space-trade-off.html">ã€Šç®—æ³•ä¼˜åŒ–ä¹‹æ—¶ç©ºäº¤æ¢ã€‹</a> ä¸€æ–‡ä¸­æœ‰å¼ºè°ƒï¼Œç®—æ³•ä¼˜åŒ–çš„æ€è·¯å°±æ˜¯ç”¨ç©ºé—´å’Œæ—¶é—´ç›¸äº’è½¬æ¢ï¼Œæ‰¾åˆ°ä¸€ä¸ªå¹³è¡¡ç‚¹ã€‚åœ¨ä¸Šå›¾ä¸­ï¼Œæˆ‘ä»¬å¤šä¿å­˜äº†ä¸€ä¸ªèŠ‚ç‚¹çš„ä¿¡æ¯ï¼ŒæŸ¥æ‰¾æ•ˆç‡å¯ä»¥è®¤ä¸ºæå‡äº†1å€ï¼Œå˜ä¸º <em><strong>O(N/2)</strong></em>, é‚£ä¹ˆä¿å­˜è¶Šå¤šçš„èŠ‚ç‚¹ä¿¡æ¯ï¼ŒæŸ¥æ‰¾æ•ˆç‡è¶Šé«˜ï¼Œä½†åœ¨æœ¬æ–‡å¼€å¤´ï¼Œæˆ‘ä»¬ä¹Ÿå¼ºè°ƒäº†ï¼Œä¸å¯èƒ½ä¿å­˜æ‰€æœ‰çš„ä¿¡æ¯(ä¿å­˜æ‰€æœ‰èŠ‚ç‚¹ä¿¡æ¯çš„æŸ¥æ‰¾å¤æ‚åº¦ä¸º <em><strong>O(1)</strong></em>).</p>
<p>Chord ç®—æ³•çš„åšæ³•æ˜¯ï¼Œæ¯ä¸ªèŠ‚ç‚¹ä¿å­˜æœ€å¤š m = <em><strong>Ceil(log<sub>2</sub>N)</strong></em> ä¸ªèŠ‚ç‚¹çš„ä¿¡æ¯ï¼Œ<em><strong>N</strong></em> ä¸ºèŠ‚ç‚¹æ•°ã€‚å‡è®¾å½“å‰èŠ‚ç‚¹ä¸º 0, å®ƒæ‰€ä¿å­˜çš„èŠ‚ç‚¹ä¸º 1, 2, 4, 8. å¦‚ä¸‹å›¾æ‰€ç¤º:</p>
<img src="https://songtianyi-blog.oss-cn-shenzhen.aliyuncs.com/node-zero-successors.jpg" width="30%">
<p>ä¿å­˜èŠ‚ç‚¹ä¿¡æ¯çš„ç»“æ„ç§°ä¸º <em><strong>finger table</strong></em>*</p>
<blockquote>
<p>èŠ‚ç‚¹ 1 æ˜¯ finger table ä¸­é¡ºæ—¶é’ˆæ–¹å‘çš„ç¬¬ 1 ä¸ªå€¼ï¼Œè¢«ç§°ä¸ºèŠ‚ç‚¹ 0 çš„ <em>successor</em>, èŠ‚ç‚¹ 8 æ˜¯ finger table ä¸­é€†æ—¶é’ˆæ–¹å‘çš„ç¬¬ 1 ä¸ªå€¼ï¼Œè¢«ç§°ä¸ºèŠ‚ç‚¹ 0 çš„ <em>predecessor</em>, è¿™ä¸¤ä¸ªæ¦‚å¿µä¼šåœ¨åé¢ç”¨åˆ°</p>
</blockquote>
<p>è®¾å½“å‰èŠ‚ç‚¹ä¸º <em><strong>n</strong></em>, å…¶ finger table ä¸­ç¬¬ i (m &gt;= i &gt;= 1) ä¸ªå€¼çš„è®¡ç®—æ–¹å¼ä¸º <em><strong>(n + 2<sup>i-1</sup>) mod 2<sup>m</sup></strong></em></p>
<p>ä»¥ N ä¸º 16 ä¸ºä¾‹ï¼ŒæŒ‰ç…§ä¸Šè¿°æ–¹æ³•æ„é€ å‡ºæ¥çš„å›¾åº”è¯¥å¦‚ä¸‹ï¼Œå…¶ä¸­ä¸€ä¸ªèŠ‚ç‚¹çš„è¿æ¥æƒ…å†µç”¨ç²—çº¿æ ‡è®°å‡ºæ¥äº†:</p>
<img src="https://songtianyi-blog.oss-cn-shenzhen.aliyuncs.com/Chord_network.png">
<p>Chord ç®—æ³•çš„æŸ¥æ‰¾å¤æ‚åº¦ä¸º <em><strong>log<sub>2</sub>N)</strong></em>.</p>
<p>æŸ¥æ‰¾çš„ä¼ªä»£ç å¦‚ä¸‹:</p>
<pre class="hljs"><code><div><span class="hljs-comment">// ask node n to find the successor of id</span>
n.find_successor(id)
    <span class="hljs-comment">// Yes, that should be a closing square bracket to match the opening parenthesis.</span>
    <span class="hljs-comment">// It is a half closed interval.</span>
    <span class="hljs-keyword">if</span> id âˆˆ (n, successor] then
        <span class="hljs-keyword">return</span> successor
    <span class="hljs-keyword">else</span>
        <span class="hljs-comment">// forward the query around the circle</span>
        n0 := closest_preceding_node(id)
        <span class="hljs-keyword">return</span> n0.find_successor(id)

<span class="hljs-comment">// search the local table for the highest predecessor of id</span>
n.closest_preceding_node(id)
    <span class="hljs-keyword">for</span> i = m downto <span class="hljs-number">1</span> <span class="hljs-keyword">do</span>
        <span class="hljs-keyword">if</span> (finger[i] âˆˆ (n, id)) then
            <span class="hljs-keyword">return</span> finger[i]
    <span class="hljs-keyword">return</span> n
</div></code></pre>
<p>å¯ä»¥ä»¥ n = 0, id = 5 ä¸ºä¾‹ï¼Œä»£å…¥è·Ÿè¸ªä¸€éé€»è¾‘æ¥ä½“ä¼šã€‚</p>
<img src="https://songtianyi-blog.oss-cn-shenzhen.aliyuncs.com/n-zero-id-five.jpg" width="30%">
<table>
<thead>
<tr>
<th style="text-align:left"><img class="emoji" alt="warning" src="data:image/png;base64,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" /> Note</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">èŠ‚ç‚¹çš„å¢åˆ ä¸åœ¨æœ¬æ–‡è®¨è®ºèŒƒå›´å†…</td>
</tr>
</tbody>
</table>
<h2 id="kademlia">Kademlia</h2>
<p>Kademlia çš„åšæ³•å’Œ Chord çš„åŒºåˆ«ä¸»è¦æ˜¯èŠ‚ç‚¹é—´çš„è·ç¦»è®¡ç®—æ–¹å¼ä¸åŒã€‚Chord ä½ å¯ä»¥è®¤ä¸ºèŠ‚ç‚¹ x, y çš„ è·ç¦»è®¡ç®—æ–¹å¼ä¸º ğ‘‘(ğ‘¥, ğ‘¦) = (ğ‘¥ - ğ‘¦)  mod 2<sup>m</sup>, è€Œ Kademlia çš„è®¡ç®—å…¬å¼ä¸º ğ‘‘(ğ‘¥, ğ‘¦)= height_of_tree - leading_zero_count(ğ‘¥ ^ ğ‘¦). Chord æ˜¯å°†èŠ‚ç‚¹çš„ ID æ˜ å°„åˆ°ä¸€ä¸ªç¯ä¸Šï¼Œè€Œ Kademlia æ˜¯å°†èŠ‚ç‚¹çš„ ID æ˜ å°„åˆ°ä¸€ä¸ªäºŒå‰æ ‘ä¸Šï¼Œå¦‚ä¸‹å›¾:</p>
<img src="https://songtianyi-blog.oss-cn-shenzhen.aliyuncs.com/kademlia-binary-bit-tree.jpeg" width="30%">
<p>èŠ‚ç‚¹ 0 å’ŒèŠ‚ç‚¹ 1 çš„è·ç¦»ä¸º 1ï¼ŒèŠ‚ç‚¹ 0 å’ŒèŠ‚ç‚¹ 7 çš„è·ç¦»ä¸º 3</p>
<table>
<thead>
<tr>
<th style="text-align:left"><img class="emoji" alt="warning" src="data:image/png;base64,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" /> Note</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">0 ^ 7 = 7, ä½†è·ç¦»å¹¶ä¸æ˜¯ 7, è€Œæ˜¯çœ‹æœ€é•¿å…¬å…±å‰ç¼€çš„æœ€ä½é«˜åº¦ï¼Œ0 å’Œ 7 æ²¡æœ‰å…¬å…±å‰ç¼€ï¼Œæ‰€ä»¥è·ç¦»æ˜¯ 3. æœ‰äº›ä¸­æ–‡åšå®¢æ²¡æœ‰ææ¸…æ¥šè¿™ä¸ªé—®é¢˜ï¼Œç›´æ¥å°†å¼‚æˆ–çš„ç»“æœä»£å…¥è®¡ç®—äº†ï¼Œæ‰€ä»¥çœ‹ç€æœ‰äº›è¿·ç³Š</td>
</tr>
</tbody>
</table>
<p>åœ¨ Kademlia é‡Œï¼Œç”¨äºå­˜å‚¨èŠ‚ç‚¹ä¿¡æ¯çš„ç»“æ„ç§°ä¸º k-bucket, å’Œ Chord ä¸­çš„ finger table ç±»ä¼¼ã€‚k-bucket çš„æ„æ€æ˜¯ï¼Œå°†èŠ‚ç‚¹æŒ‰ç…§ä¸åŒçš„è·ç¦»ï¼Œåˆ†åˆ«å­˜åœ¨ä¸åŒçš„ bucket é‡Œï¼Œæœ€å¤šæœ‰ H ä¸ª bucket, H ä¸ºæ ‘çš„é«˜åº¦, æ¯ä¸ª bucket æ˜¯ä¸€ä¸ª list, é•¿åº¦æœ€å¤§ä¸º k, ä¸” list æ˜¯æŒ‰ç…§æœ€è¿‘ä½¿ç”¨æ—¶é—´ä»å°åˆ°å¤§æ’åºçš„(sorted by time last seen - least-recently seen node at the head, most recently seen at the tail).</p>
<table>
<thead>
<tr>
<th style="text-align:left"><img class="emoji" alt="warning" src="data:image/png;base64,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" /> Note</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">k çš„å–å€¼ä¸æ˜¯å›ºå®šçš„ï¼Œä¸€èˆ¬ä¸º 20, æ ¹æ®å®é™…åœºæ™¯è°ƒæ•´, æ„Ÿå…´è¶£å¯ä»¥çœ‹ä¸‹è®ºæ–‡ä¸­çš„è‹±æ–‡è§£é‡Š</td>
</tr>
</tbody>
</table>
<p>æ ¹æ®ä¸Šå›¾ï¼Œæˆ‘ä»¬ä»¥èŠ‚ç‚¹ 0 ä¸ºä¾‹ï¼Œå®ƒçš„ bucket æœ‰ 3 ä¸ªï¼Œåˆ†åˆ«ç”¨ä¸åŒé¢œè‰²æ ‡è®°äº†å‡ºæ¥ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºã€‚</p>
<img src="https://songtianyi-blog.oss-cn-shenzhen.aliyuncs.com/k-bucket-groups-update.jpg" width="30%">
<p>k-bucket çš„å­˜å‚¨ç»“æœå¦‚ä¸‹å›¾æ‰€ç¤º:</p>
<img src="https://songtianyi-blog.oss-cn-shenzhen.aliyuncs.com/zero-node-k-bucket.jpg" width="30%">
<p>å½“æˆ‘ä»¬å‘èŠ‚ç‚¹ 0 è¯¢é—®èŠ‚ç‚¹ 7 çš„ä¿¡æ¯æ—¶ï¼Œå…ˆè®¡ç®— d(0, 7) = 3, å¾—çŸ¥ï¼ŒèŠ‚ç‚¹ 7 ç¦» bucket[3] ä¸­çš„èŠ‚ç‚¹æ›´è¿‘ï¼Œäºæ˜¯å» bucket[3] çš„èŠ‚ç‚¹ä¸­å»æ‰¾ï¼Œå¦‚æœæ‰¾ä¸åˆ°ç»§ç»­è¿­ä»£å³å¯ï¼Œè¿™æ ·å°±å¯ä»¥è·³è¿‡ä¸€éƒ¨åˆ†æŸ¥æ‰¾ï¼Œæ¯æ¬¡å¯ä»¥è·³è¿‡ä¸€åŠçš„æ•°æ®ï¼Œè¿™æ ·æ•ˆç‡åœ¨ log<sub>2</sub>N.</p>
<h2 id="%E7%BB%93%E8%AF%AD">ç»“è¯­</h2>
<p>ä¸ç®¡æ˜¯ Chord è¿˜æ˜¯ Kademlia, å…¶å®ç°éƒ½è¦æ¯”æœ¬æ–‡æ‰€è¿°çš„è¦å¤æ‚çš„å¤šï¼Œå®Œæ•´çš„ P2P ç½‘ç»œçš„å®ç°éœ€è¦è€ƒè™‘çš„å› ç´ ä¹Ÿä¼šæ›´å¤šã€‚æœ¬æ–‡ä¸»è¦æ˜¯è¯´æ˜å®ƒä»¬çš„ç®—æ³•æ€æƒ³</p>
<h2 id="%E5%8F%82%E8%80%83%E8%B5%84%E6%96%99">å‚è€ƒèµ„æ–™</h2>
<ul>
<li><a href="https://en.wikipedia.org/wiki/Chord_(peer-to-peer)">Chord (peer-to-peer)</a></li>
<li><a href="https://pdos.csail.mit.edu/papers/chord:sigcomm01/chord_sigcomm.pdf">Chord: A Scalable Peer-to-peer Lookup Service for Internet Applications</a></li>
<li><a href="https://www.quora.com/Which-are-the-major-differences-between-the-DHT-algorithms-Chord-and-Kademlia">https://www.quora.com/Which-are-the-major-differences-between-the-DHT-algorithms-Chord-and-Kademlia</a></li>
<li><a href="https://pdos.csail.mit.edu/~petar/papers/maymounkov-kademlia-lncs.pdf">Kademlia: A Peer-to-Peer Information System Based on the XOR Metric</a></li>
<li><a href="https://jenkov.com/tutorials/p2p/index.html">Peer-to-Peer (P2P) Networks</a></li>
</ul>

</body>
</html>
